(this["webpackJsonpit-kamasutra"]=this["webpackJsonpit-kamasutra"]||[]).push([[1],{12:function(e,t,n){"use strict";n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return i}));var r=n(85),a=r.create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"c67a6d78-03b8-4283-aaa1-2235868445fc"}}),s={defaultCurrentPage:1,defaultPageSize:5,instance:a,getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.defaultCurrentPage,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultPageSize;return this.instance.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},setFollow:function(e){return this.instance.post("follow/".concat(e)).then((function(e){return e.data}))},setUnfollow:function(e){return this.instance.delete("follow/".concat(e)).then((function(e){return e.data}))}},u={instance:a,getUserProfile:function(e){return this.instance.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return this.instance.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return this.instance.put("profile/status",{status:e})}},i={instance:a,authMe:function(){return this.instance.get("auth/me").then((function(e){return e.data}))},login:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.instance.post("auth/login",{email:e,password:t,rememberMe:n}).then((function(e){return e.data}))},logout:function(){return this.instance.delete("auth/login").then((function(e){return e.data}))}}},16:function(e,t,n){e.exports={nav:"Navbar_nav__2Kv0T",nav__link:"Navbar_nav__link__3jFwb",active:"Navbar_active__3KUz9"}},20:function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"a",(function(){return j})),n.d(t,"f",(function(){return O})),n.d(t,"c",(function(){return _})),n.d(t,"d",(function(){return v}));var r=n(7),a=n.n(r),s=n(11),u=n(3),i=n(48),c=n(12),o=n(39),l="auth/SET_USER_DATA",f="auth/SET_USER_INFO",d="auth/CHANGE_IS_FETCHING",h={userId:null,userInfo:null,email:null,login:null,isFetching:!1,isAuth:!1},p=function(e,t,n,r){return{type:l,payload:{userId:e,email:t,login:n,isAuth:r}}},g=function(e){return{type:f,userInfo:e}},b=function(e){return{type:d,isFetching:e}},j=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,u,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.authMe();case 2:0===(n=e.sent).resultCode&&(r=n.data,s=r.id,u=r.email,i=r.login,t(p(s,u,i,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},O=function(e){return function(t){t(b(!0)),c.b.getUserProfile(e).then((function(e){t(g(e)),t(Object(o.d)(e)),t(b(!1))}))}},_=function(e,t,n){return function(){var r=Object(s.a)(a.a.mark((function r(s){var u,o;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c.a.login(e,t,n);case 2:0===(u=r.sent).resultCode?s(j()):(console.log(u),o=u.data.messages.length?u.data.messages.length:"Wrong email or password",s(Object(i.a)("login",{_error:o})));case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},v=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.a.logout();case 2:0===e.sent.resultCode&&t(p(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(u.a)(Object(u.a)({},e),t.payload);case f:return Object(u.a)(Object(u.a)({},e),{},{userInfo:t.userInfo});case d:return Object(u.a)(Object(u.a)({},e),{},{isFetching:t.isFetching});default:return e}}},220:function(e,t,n){},226:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);n(64);var r=function(e){e&&e instanceof Function&&n.e(8).then(n.bind(null,304)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),s(e),u(e)}))},a=n(23),s=n(39),u=n(74),i=n(84),c=n(20),o=n(86),l=n(83),f=n(7),d=n.n(f),h=n(11),p=n(3),g="app/SET_INITIALIZED",b={initialized:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(p.a)(Object(p.a)({},e),{},{initialized:!0});default:return e}},O=Object(a.c)({profilePage:s.b,dialogsPage:u.b,usersPage:i.b,auth:c.b,app:j,form:l.a}),_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.d,v=Object(a.e)(O,_(Object(a.a)(o.a))),m=n(0),x=n.n(m),w=n(47),P=n.n(w),y=n(10),k=n(35),I=n(36),S=n(38),T=n(37),U=(n(220),n(16)),E=n.n(U),N=n(2),C=function(){return Object(N.jsxs)("nav",{className:E.a.nav,children:[Object(N.jsx)(y.b,{to:"/profile",activeClassName:E.a.active,className:E.a.nav__link,children:"Profile"}),Object(N.jsx)(y.b,{to:"/dialogs",activeClassName:E.a.active,className:E.a.nav__link,children:"Messages"}),Object(N.jsx)(y.b,{to:"/users",activeClassName:E.a.active,className:E.a.nav__link,children:"Users"}),Object(N.jsx)(y.b,{to:"/music",activeClassName:E.a.active,className:E.a.nav__link,children:"Music"}),Object(N.jsx)(y.b,{to:"/settings",activeClassName:E.a.active,className:E.a.nav__link,children:"Settings"})]})},F=n(5),A=n(26),D=(n(226),function(){return Object(N.jsx)(y.b,{to:"/",className:"logo",children:Object(N.jsx)("img",{className:"logo__image",src:"https://i2.wp.com/www.wanecque.com/wp-content/uploads/2019/08/141-1418031_disneyland-paris-logo-png-transparent-disneyland-paris-logo.png",alt:"logo"})})}),L=n(88),z=n.n(L),M=n(32),G=n(82),R=n(25),H=n.n(R),K=function(e){var t=e.login,n=e.isAuth,r=e.userId,a=e.authUserPhoto,s=e.updateUserInfo,u=e.onLogout,i=null!==a&&void 0!==a?a:G.a;return Object(N.jsx)(N.Fragment,{children:n?Object(N.jsxs)("div",{className:H.a.user__info,children:[Object(N.jsx)(y.b,{onClick:function(){return s(r)},to:"/profile/".concat(r),children:Object(N.jsx)("img",{className:H.a.user__photo,src:i,alt:"user__photo"})}),Object(N.jsx)("div",{className:H.a.user__login,children:t}),Object(N.jsx)("button",{type:"button",className:H.a.user__logout,onClick:function(){return u()},children:"logout"})]}):Object(N.jsx)("div",{className:H.a.login,children:Object(N.jsx)(y.b,{to:"/login",className:H.a.login__link,children:"Login"})})})},W=function(e){var t=e.login,n=e.isAuth,r=e.userId,a=e.authUser,s=e.isFetching,u=e.updateUserInfo,i=e.authUserPhoto,c=e.onLogout,o=s?Object(N.jsx)(M.a,{}):Object(N.jsx)(K,{login:t,isAuth:n,userId:r,user:a,updateUserInfo:u,authUserPhoto:i,onLogout:c});return Object(N.jsxs)("header",{className:z.a.header,children:[Object(N.jsx)(D,{}),o]})},Z=n(63),q=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){var e;Object(k.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).updateUserInfo=function(t){e.props.updateProfileThunk(t)},e.onLogout=function(){e.props.logoutThunk()},e}return Object(I.a)(n,[{key:"render",value:function(){return Object(N.jsx)(W,Object(p.a)(Object(p.a)({},this.props),{},{authUserPhoto:this.props.authUserPhoto,updateUserInfo:this.updateUserInfo,onLogout:this.onLogout}))}}]),n}(x.a.Component),B=Object(A.b)((function(e){var t;return{login:e.auth.login,isAuth:Object(Z.a)(e),userId:e.auth.userId,isFetching:e.auth.isFetching,authUserPhoto:null===(t=e.auth.userinfo)||void 0===t?void 0:t.photos.small}}),{setUserInfo:c.e,updateProfileThunk:c.f,logoutThunk:c.d})(q),J=x.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,307))})),V=x.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,305))})),X=x.a.lazy((function(){return n.e(7).then(n.bind(null,306))})),Y=x.a.lazy((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,308))})),Q=function(e){Object(S.a)(n,e);var t=Object(T.a)(n);function n(){return Object(k.a)(this,n),t.apply(this,arguments)}return Object(I.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeAppThunk()}},{key:"render",value:function(){return this.props.initialized?Object(N.jsxs)("div",{className:"app-wrapper",children:[Object(N.jsx)(B,{}),Object(N.jsx)(C,{}),Object(N.jsx)("main",{className:"content",children:Object(N.jsx)(m.Suspense,{fallback:Object(N.jsx)(M.a,{}),children:Object(N.jsxs)(F.d,{children:[Object(N.jsx)(F.b,{path:"/profile/:userId?",render:function(){return Object(N.jsx)(V,{})}}),Object(N.jsx)(F.b,{path:"/dialogs",render:function(){return Object(N.jsx)(J,{})}}),Object(N.jsx)(F.b,{path:"/users",render:function(){return Object(N.jsx)(X,{})}}),Object(N.jsx)(F.b,{path:"/login",render:function(){return Object(N.jsx)(Y,{})}})]})})})]}):Object(N.jsx)(M.a,{})}}]),n}(x.a.Component),$=Object(a.d)(Object(A.b)((function(e){return{initialized:e.app.initialized}}),{initializeAppThunk:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(Object(c.a)());case 2:return e.next=4,t({type:g});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),F.g)(Q);P.a.render(Object(N.jsx)(y.a,{children:Object(N.jsx)(A.a,{store:v,children:Object(N.jsx)($,{})})}),document.getElementById("root")),r()},25:function(e,t,n){e.exports={user__info:"AuthPage_user__info__lgRey",user__photo:"AuthPage_user__photo__1GqgF",login:"AuthPage_login__1Kw5M",login__link:"AuthPage_login__link__C7tCE"}},32:function(e,t,n){"use strict";n(0);var r=n.p+"static/media/preloader.816e2b9b.gif",a=n(89),s=n.n(a),u=n(2);t.a=function(){return Object(u.jsx)("div",{className:s.a.preloader,children:Object(u.jsx)("img",{src:r,alt:"preloader"})})}},39:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return j})),n.d(t,"c",(function(){return O})),n.d(t,"f",(function(){return _}));var r=n(7),a=n.n(r),s=n(11),u=n(24),i=n(3),c=n(12),o="profilePage/ADD_POST",l="profilePage/DELETE_POST",f="profilePage/SET_USER_STATUS",d="profilePage/SET_USER_PROFILE",h={postsData:[{id:1,message:"Hi",likes:1},{id:2,message:"How are",likes:0},{id:3,message:"you?",likes:12}],userProfile:null,userStatus:""},p=function(e){return{type:o,newPostText:e}},g=function(e){return{type:f,statusMessage:e}},b=function(e){return{type:d,userProfile:e}},j=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.getUserProfile(e);case 2:r=t.sent,n(b(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.getStatus(e);case 2:r=t.sent,n(g(r));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.b.updateStatus(e);case 2:0===(r=t.sent).resultCode&&n(g(r.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:var n={id:1+e.postsData.length,message:t.newPostText,likes:0};return Object(i.a)(Object(i.a)({},e),{},{postsData:[].concat(Object(u.a)(e.postsData),[n])});case l:return Object(i.a)(Object(i.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.userId}))});case f:return Object(i.a)(Object(i.a)({},e),{},{userStatus:t.statusMessage});case d:return Object(i.a)(Object(i.a)({},e),{},{userProfile:t.userProfile});default:return e}}},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.auth.isAuth}},64:function(e,t,n){},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(24),a=n(3),s="ADD_MESSAGE",u={dialogsData:[{id:1,name:"Denis"},{id:2,name:"Andrey"},{id:3,name:"Anna"},{id:4,name:"Maria"},{id:5,name:"Max"}],messagesData:[{id:1,message:"Hi"},{id:2,message:"How are"},{id:3,message:"you?"}]},i=function(e){return{type:s,newMessageText:e}};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case s:var n={id:1+e.messagesData.length,message:t.newMessageText};return Object(a.a)(Object(a.a)({},e),{},{messagesData:[].concat(Object(r.a)(e.messagesData),[n])});default:return e}}},82:function(e,t,n){"use strict";t.a=n.p+"static/media/yoda.e1e936ed.jpeg"},84:function(e,t,n){"use strict";n.d(t,"c",(function(){return O})),n.d(t,"g",(function(){return _})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return x})),n.d(t,"e",(function(){return w})),n.d(t,"d",(function(){return P}));var r=n(7),a=n.n(r),s=n(11),u=n(24),i=n(3),c=n(12),o=function(e,t,n,r){return e.map((function(e){return e[n]===t?Object(i.a)(Object(i.a)({},e),r):e}))},l="usersPage/SET_USERS",f="usersPage/FOLLOW",d="usersPage/UNFOLLOW",h="usersPage/SET_CURRENT_PAGE",p="usersPage/SET_TOTAL_USERS",g="usersPage/TOGGLE_IS_FETCHING",b="usersPage/TOGGLE_IS_FOLLOWING_PROGRESS",j={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},O=function(e){return{type:f,userId:e}},_=function(e){return{type:d,userId:e}},v=function(e){return{type:h,currentPage:e}},m=function(e){return{type:g,isFetching:e}},x=function(e,t){return{type:b,isFetching:e,userId:t}},w=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(m(!0)),n.next=3,c.c.getUsers(e,t);case 3:s=n.sent,r((u=s.items,{type:l,users:u})),r((a=s.totalCount,{type:p,totalUsersCount:a})),r(m(!1));case 7:case"end":return n.stop()}var a,u}),n)})));return function(e){return n.apply(this,arguments)}}()},P=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r(x(!0,t)),n.t0=e,n.next="follow"===n.t0?4:"unfollow"===n.t0?10:16;break;case 4:return n.next=6,c.c.setFollow(t);case 6:return 0===n.sent.resultCode&&r(O(t)),r(x(!1,t)),n.abrupt("break",18);case 10:return n.next=12,c.c.setUnfollow(t);case 12:return 0===n.sent.resultCode&&r(_(t)),r(x(!1,t)),n.abrupt("break",18);case 16:return console.error("followingThunkCreator, \u043e\u0448\u0438\u0431\u043a\u0430 \u0432 \u0443\u043a\u0430\u0437\u0430\u043d\u0438\u0438 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430 ".concat(e,". \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u044b\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b: follow, unfollow")),n.abrupt("break",18);case 18:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(i.a)(Object(i.a)({},e),{},{users:Object(u.a)(t.users)});case f:return Object(i.a)(Object(i.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!0})});case d:return Object(i.a)(Object(i.a)({},e),{},{users:o(e.users,t.userId,"id",{followed:!1})});case h:return Object(i.a)(Object(i.a)({},e),{},{currentPage:t.currentPage});case p:return Object(i.a)(Object(i.a)({},e),{},{totalUsersCount:t.totalUsersCount});case g:return Object(i.a)(Object(i.a)({},e),{},{isFetching:t.isFetching});case b:return Object(i.a)(Object(i.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(u.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}}},88:function(e,t,n){e.exports={header:"Header_header__2uxcx",user__info:"Header_user__info__AZKOy",user__photo:"Header_user__photo__GnFDG",login:"Header_login__2zz7Z",login__link:"Header_login__link__2aV94"}},89:function(e,t,n){e.exports={preloader:"Preloader_preloader__3PlA0"}}},[[227,2,3]]]);
//# sourceMappingURL=main.d9286eb5.chunk.js.map